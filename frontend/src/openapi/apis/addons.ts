/**
 * Generated by Orval
 * Do not edit manually.
 * See `gen:api` script in package.json
 */
import useSwr from 'swr';
import type { SWRConfiguration, Key } from 'swr';
import type {
    AddonsSchema,
    GetAddons401,
    AddonSchema,
    AddonCreateUpdateSchema,
    GetAddon401,
} from '../models';
import { fetcher } from '../fetcher';
import type { ErrorType, BodyType } from '../fetcher';

/**
 * Retrieve all addons and providers that are defined on this Unleash instance.
 * @summary Get all addons and providers
 */
export const getAddons = () => {
    return fetcher<AddonsSchema>({ url: `/api/admin/addons`, method: 'get' });
};

export const getGetAddonsKey = () => [`/api/admin/addons`] as const;

export type GetAddonsQueryResult = NonNullable<
    Awaited<ReturnType<typeof getAddons>>
>;
export type GetAddonsQueryError = ErrorType<GetAddons401>;

/**
 * @summary Get all addons and providers
 */
export const useGetAddons = <TError = ErrorType<GetAddons401>>(options?: {
    swr?: SWRConfiguration<Awaited<ReturnType<typeof getAddons>>, TError> & {
        swrKey?: Key;
        enabled?: boolean;
    };
}) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false;
    const swrKey =
        swrOptions?.swrKey ?? (() => (isEnabled ? getGetAddonsKey() : null));
    const swrFn = () => getAddons();

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Create an addon instance. The addon must use one of the providers available on this Unleash instance.
 * @summary Create a new addon
 */
export const createAddon = (
    addonCreateUpdateSchema: BodyType<AddonCreateUpdateSchema>
) => {
    return fetcher<AddonSchema>({
        url: `/api/admin/addons`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: addonCreateUpdateSchema,
    });
};

/**
 * Retrieve information about the addon whose ID matches the ID in the request URL.
 * @summary Get a specific addon
 */
export const getAddon = (id: string) => {
    return fetcher<AddonSchema>({
        url: `/api/admin/addons/${id}`,
        method: 'get',
    });
};

export const getGetAddonKey = (id: string) =>
    [`/api/admin/addons/${id}`] as const;

export type GetAddonQueryResult = NonNullable<
    Awaited<ReturnType<typeof getAddon>>
>;
export type GetAddonQueryError = ErrorType<GetAddon401>;

/**
 * @summary Get a specific addon
 */
export const useGetAddon = <TError = ErrorType<GetAddon401>>(
    id: string,
    options?: {
        swr?: SWRConfiguration<Awaited<ReturnType<typeof getAddon>>, TError> & {
            swrKey?: Key;
            enabled?: boolean;
        };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!id;
    const swrKey =
        swrOptions?.swrKey ?? (() => (isEnabled ? getGetAddonKey(id) : null));
    const swrFn = () => getAddon(id);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Update the addon with a specific ID. Any fields in the update object will be updated. Properties that are not included in the update object will not be affected. To empty a property, pass `null` as that property's value.

Note: passing `null` as a value for the description property will set it to an empty string.
 * @summary Update an addon
 */
export const updateAddon = (
    id: string,
    addonCreateUpdateSchema: BodyType<AddonCreateUpdateSchema>
) => {
    return fetcher<AddonSchema>({
        url: `/api/admin/addons/${id}`,
        method: 'put',
        headers: { 'Content-Type': 'application/json' },
        data: addonCreateUpdateSchema,
    });
};

/**
 * Delete the addon specified by the ID in the request path.
 * @summary Delete an addon
 */
export const deleteAddon = (id: string) => {
    return fetcher<void>({ url: `/api/admin/addons/${id}`, method: 'delete' });
};
