/**
 * Generated by Orval
 * Do not edit manually.
 * See `gen:api` script in package.json
 */
import useSwr from 'swr';
import type { SWRConfiguration, Key } from 'swr';
import type {
    FeaturesSchema,
    GetArchivedFeatures401,
    GetArchivedFeatures403,
    GetArchivedFeaturesByProjectId401,
    GetArchivedFeaturesByProjectId403,
    BatchFeaturesSchema,
} from '../models';
import { fetcher } from '../fetcher';
import type { ErrorType, BodyType } from '../fetcher';

/**
 * Retrieve a list of all [archived feature toggles](https://docs.getunleash.io/reference/archived-toggles).
 * @deprecated
 * @summary Get archived features
 */
export const getArchivedFeatures = () => {
    return fetcher<FeaturesSchema>({
        url: `/api/admin/archive/features`,
        method: 'get',
    });
};

export const getGetArchivedFeaturesKey = () =>
    [`/api/admin/archive/features`] as const;

export type GetArchivedFeaturesQueryResult = NonNullable<
    Awaited<ReturnType<typeof getArchivedFeatures>>
>;
export type GetArchivedFeaturesQueryError = ErrorType<
    GetArchivedFeatures401 | GetArchivedFeatures403
>;

/**
 * @deprecated
 * @summary Get archived features
 */
export const useGetArchivedFeatures = <
    TError = ErrorType<GetArchivedFeatures401 | GetArchivedFeatures403>
>(options?: {
    swr?: SWRConfiguration<
        Awaited<ReturnType<typeof getArchivedFeatures>>,
        TError
    > & { swrKey?: Key; enabled?: boolean };
}) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetArchivedFeaturesKey() : null));
    const swrFn = () => getArchivedFeatures();

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Retrieves a list of archived features that belong to the provided project.
 * @deprecated
 * @summary Get archived features in project
 */
export const getArchivedFeaturesByProjectId = (projectId: string) => {
    return fetcher<FeaturesSchema>({
        url: `/api/admin/archive/features/${projectId}`,
        method: 'get',
    });
};

export const getGetArchivedFeaturesByProjectIdKey = (projectId: string) =>
    [`/api/admin/archive/features/${projectId}`] as const;

export type GetArchivedFeaturesByProjectIdQueryResult = NonNullable<
    Awaited<ReturnType<typeof getArchivedFeaturesByProjectId>>
>;
export type GetArchivedFeaturesByProjectIdQueryError = ErrorType<
    GetArchivedFeaturesByProjectId401 | GetArchivedFeaturesByProjectId403
>;

/**
 * @deprecated
 * @summary Get archived features in project
 */
export const useGetArchivedFeaturesByProjectId = <
    TError = ErrorType<
        GetArchivedFeaturesByProjectId401 | GetArchivedFeaturesByProjectId403
    >
>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getArchivedFeaturesByProjectId>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() =>
            isEnabled ? getGetArchivedFeaturesByProjectIdKey(projectId) : null);
    const swrFn = () => getArchivedFeaturesByProjectId(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * This endpoint archives the specified feature.
 * @summary Archives a feature
 */
export const deleteFeature = (featureName: string) => {
    return fetcher<void>({
        url: `/api/admin/archive/${featureName}`,
        method: 'delete',
    });
};

/**
 * This endpoint revives the specified feature from archive.
 * @summary Revives a feature
 */
export const reviveFeature = (featureName: string) => {
    return fetcher<void>({
        url: `/api/admin/archive/revive/${featureName}`,
        method: 'post',
    });
};

/**
 * This endpoint deletes the specified features, that are in archive.
 * @summary Deletes a list of features
 */
export const deleteFeatures = (
    projectId: string,
    batchFeaturesSchema: BodyType<BatchFeaturesSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/delete`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: batchFeaturesSchema,
    });
};

/**
 * This endpoint revives the specified features.
 * @summary Revives a list of features
 */
export const reviveFeatures = (
    projectId: string,
    batchFeaturesSchema: BodyType<BatchFeaturesSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/revive`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: batchFeaturesSchema,
    });
};
