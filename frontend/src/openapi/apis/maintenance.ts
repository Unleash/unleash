/**
 * Generated by Orval
 * Do not edit manually.
 * See `gen:api` script in package.json
 */
import useSwr from 'swr';
import type { SWRConfiguration, Key } from 'swr';
import type {
    ToggleMaintenanceSchema,
    MaintenanceSchema,
    GetMaintenance401,
    GetMaintenance403,
} from '../models';
import { fetcher } from '../fetcher';
import type { ErrorType, BodyType } from '../fetcher';

/**
 * Lets administrators put Unleash into a mostly read-only mode. While Unleash is in maintenance mode, users can not change any configuration settings
 * @summary Enabled/disabled maintenance mode
 */
export const toggleMaintenance = (
    toggleMaintenanceSchema: BodyType<ToggleMaintenanceSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/maintenance`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: toggleMaintenanceSchema,
    });
};

/**
 * Tells you whether maintenance mode is enabled or disabled
 * @summary Get maintenance mode status
 */
export const getMaintenance = () => {
    return fetcher<MaintenanceSchema>({
        url: `/api/admin/maintenance`,
        method: 'get',
    });
};

export const getGetMaintenanceKey = () => [`/api/admin/maintenance`] as const;

export type GetMaintenanceQueryResult = NonNullable<
    Awaited<ReturnType<typeof getMaintenance>>
>;
export type GetMaintenanceQueryError = ErrorType<
    GetMaintenance401 | GetMaintenance403
>;

/**
 * @summary Get maintenance mode status
 */
export const useGetMaintenance = <
    TError = ErrorType<GetMaintenance401 | GetMaintenance403>
>(options?: {
    swr?: SWRConfiguration<
        Awaited<ReturnType<typeof getMaintenance>>,
        TError
    > & { swrKey?: Key; enabled?: boolean };
}) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetMaintenanceKey() : null));
    const swrFn = () => getMaintenance();

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};
