/**
 * Generated by Orval
 * Do not edit manually.
 * See `gen:api` script in package.json
 */
import useSwr from 'swr';
import type { SWRConfiguration, Key } from 'swr';
import type {
    ProjectsSchema,
    GetProjects401,
    GetProjects403,
    ProjectCreatedSchema,
    CreateProjectSchema,
    ValidateProjectSchema,
    UpdateProjectSchema,
    ProjectOverviewSchema,
    GetProjectOverview401,
    GetProjectOverview403,
    GetProjectOverview404,
    ProjectUsers,
    ProjectAccessSchema,
    ProjectSettingsSchema,
    ProjectEnvironmentSchema,
    CreateFeatureStrategySchema,
    HealthReportSchema,
    GetProjectHealthReport401,
    GetProjectHealthReport403,
    GetProjectHealthReport404,
    ApiTokensSchema,
    GetProjectApiTokens401,
    GetProjectApiTokens403,
    GetProjectApiTokens404,
    ApiTokenSchema,
    CreateApiTokenSchema,
} from '../models';
import { fetcher } from '../fetcher';
import type { ErrorType, BodyType } from '../fetcher';

/**
 * This endpoint returns an list of all the projects in the Unleash instance.
 * @summary Get a list of all projects.
 */
export const getProjects = () => {
    return fetcher<ProjectsSchema>({
        url: `/api/admin/projects`,
        method: 'get',
    });
};

export const getGetProjectsKey = () => [`/api/admin/projects`] as const;

export type GetProjectsQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjects>>
>;
export type GetProjectsQueryError = ErrorType<GetProjects401 | GetProjects403>;

/**
 * @summary Get a list of all projects.
 */
export const useGetProjects = <
    TError = ErrorType<GetProjects401 | GetProjects403>
>(options?: {
    swr?: SWRConfiguration<Awaited<ReturnType<typeof getProjects>>, TError> & {
        swrKey?: Key;
        enabled?: boolean;
    };
}) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false;
    const swrKey =
        swrOptions?.swrKey ?? (() => (isEnabled ? getGetProjectsKey() : null));
    const swrFn = () => getProjects();

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

export const createProject = (
    createProjectSchema: BodyType<CreateProjectSchema>
) => {
    return fetcher<ProjectCreatedSchema>({
        url: `/api/admin/projects`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: createProjectSchema,
    });
};

export const validateProject = (
    validateProjectSchema: BodyType<ValidateProjectSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/projects/validate`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: validateProjectSchema,
    });
};

export const updateProject = (
    projectId: string,
    updateProjectSchema: BodyType<UpdateProjectSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}`,
        method: 'put',
        headers: { 'Content-Type': 'application/json' },
        data: updateProjectSchema,
    });
};

export const deleteProject = (projectId: string) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}`,
        method: 'delete',
    });
};

/**
 * This endpoint returns an overview of the specified projects stats, project health, number of members, which environments are configured, and the features in the project.
 * @summary Get an overview of a project.
 */
export const getProjectOverview = (projectId: string) => {
    return fetcher<ProjectOverviewSchema>({
        url: `/api/admin/projects/${projectId}`,
        method: 'get',
    });
};

export const getGetProjectOverviewKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}`] as const;

export type GetProjectOverviewQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectOverview>>
>;
export type GetProjectOverviewQueryError = ErrorType<
    GetProjectOverview401 | GetProjectOverview403 | GetProjectOverview404
>;

/**
 * @summary Get an overview of a project.
 */
export const useGetProjectOverview = <
    TError = ErrorType<
        GetProjectOverview401 | GetProjectOverview403 | GetProjectOverview404
    >
>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectOverview>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectOverviewKey(projectId) : null));
    const swrFn = () => getProjectOverview(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * @deprecated
 */
export const getProjectUsers = (projectId: string) => {
    return fetcher<ProjectUsers>({
        url: `/api/admin/projects/${projectId}/users`,
        method: 'get',
    });
};

export const getGetProjectUsersKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}/users`] as const;

export type GetProjectUsersQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectUsers>>
>;
export type GetProjectUsersQueryError = ErrorType<unknown>;

/**
 * @deprecated
 */
export const useGetProjectUsers = <TError = ErrorType<unknown>>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectUsers>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectUsersKey(projectId) : null));
    const swrFn = () => getProjectUsers(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

export const getProjectAccess = (projectId: string) => {
    return fetcher<ProjectAccessSchema>({
        url: `/api/admin/projects/${projectId}/access`,
        method: 'get',
    });
};

export const getGetProjectAccessKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}/access`] as const;

export type GetProjectAccessQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectAccess>>
>;
export type GetProjectAccessQueryError = ErrorType<unknown>;

export const useGetProjectAccess = <TError = ErrorType<unknown>>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectAccess>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectAccessKey(projectId) : null));
    const swrFn = () => getProjectAccess(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

export const addRoleToUser = (
    projectId: string,
    userId: string,
    roleId: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/users/${userId}/roles/${roleId}`,
        method: 'post',
    });
};

export const removeRoleForUser = (
    projectId: string,
    userId: string,
    roleId: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/users/${userId}/roles/${roleId}`,
        method: 'delete',
    });
};

export const changeRoleForUser = (
    projectId: string,
    userId: string,
    roleId: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/users/${userId}/roles/${roleId}`,
        method: 'put',
    });
};

export const changeRoleForGroup = (
    projectId: string,
    groupId: string,
    roleId: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/groups/${groupId}/roles/${roleId}`,
        method: 'put',
    });
};

export const removeRoleFromGroup = (
    projectId: string,
    groupId: string,
    roleId: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/groups/${groupId}/roles/${roleId}`,
        method: 'delete',
    });
};

export const addAccessToProject = (projectId: string, roleId: string) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/role/${roleId}/access`,
        method: 'post',
    });
};

export const getProjectSettings = (projectId: string) => {
    return fetcher<ProjectSettingsSchema>({
        url: `/api/admin/projects/${projectId}/settings`,
        method: 'get',
    });
};

export const getGetProjectSettingsKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}/settings`] as const;

export type GetProjectSettingsQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectSettings>>
>;
export type GetProjectSettingsQueryError = ErrorType<void>;

export const useGetProjectSettings = <TError = ErrorType<void>>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectSettings>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectSettingsKey(projectId) : null));
    const swrFn = () => getProjectSettings(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * This endpoint adds the provided environment to the specified project, with optional support for enabling and disabling change requests for the environment and project.
 * @summary Add an environment to a project.
 */
export const addEnvironmentToProject = (
    projectId: string,
    projectEnvironmentSchema: BodyType<ProjectEnvironmentSchema>
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/environments`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: projectEnvironmentSchema,
    });
};

/**
 * This endpoint removes the specified environment from the project.
 * @summary Remove an environment from a project.
 */
export const removeEnvironmentFromProject = (
    projectId: string,
    environment: string
) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/environments/${environment}`,
        method: 'delete',
    });
};

/**
 * Adds a default strategy for this environment. Unleash will use this strategy by default when enabling a toggle. Use the wild card "*" for `:environment` to add to all environments.
 */
export const addDefaultStrategyToProjectEnvironment = (
    projectId: string,
    environment: string,
    createFeatureStrategySchema: BodyType<CreateFeatureStrategySchema>
) => {
    return fetcher<CreateFeatureStrategySchema>({
        url: `/api/admin/projects/${projectId}/environments/${environment}/default-strategy`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: createFeatureStrategySchema,
    });
};

/**
 * This endpoint returns a health report for the specified project. This data is used for [the technical debt dashboard](https://docs.getunleash.io/reference/technical-debt#the-technical-debt-dashboard)
 * @summary Get a health report for a project.
 */
export const getProjectHealthReport = (projectId: string) => {
    return fetcher<HealthReportSchema>({
        url: `/api/admin/projects/${projectId}/health-report`,
        method: 'get',
    });
};

export const getGetProjectHealthReportKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}/health-report`] as const;

export type GetProjectHealthReportQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectHealthReport>>
>;
export type GetProjectHealthReportQueryError = ErrorType<
    | GetProjectHealthReport401
    | GetProjectHealthReport403
    | GetProjectHealthReport404
>;

/**
 * @summary Get a health report for a project.
 */
export const useGetProjectHealthReport = <
    TError = ErrorType<
        | GetProjectHealthReport401
        | GetProjectHealthReport403
        | GetProjectHealthReport404
    >
>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectHealthReport>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectHealthReportKey(projectId) : null));
    const swrFn = () => getProjectHealthReport(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Returns the [project API tokens](https://docs.getunleash.io/how-to/how-to-create-project-api-tokens) that have been created for this project.
 * @summary Get api tokens for project.
 */
export const getProjectApiTokens = (projectId: string) => {
    return fetcher<ApiTokensSchema>({
        url: `/api/admin/projects/${projectId}/api-tokens`,
        method: 'get',
    });
};

export const getGetProjectApiTokensKey = (projectId: string) =>
    [`/api/admin/projects/${projectId}/api-tokens`] as const;

export type GetProjectApiTokensQueryResult = NonNullable<
    Awaited<ReturnType<typeof getProjectApiTokens>>
>;
export type GetProjectApiTokensQueryError = ErrorType<
    GetProjectApiTokens401 | GetProjectApiTokens403 | GetProjectApiTokens404
>;

/**
 * @summary Get api tokens for project.
 */
export const useGetProjectApiTokens = <
    TError = ErrorType<
        GetProjectApiTokens401 | GetProjectApiTokens403 | GetProjectApiTokens404
    >
>(
    projectId: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getProjectApiTokens>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!projectId;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetProjectApiTokensKey(projectId) : null));
    const swrFn = () => getProjectApiTokens(projectId);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Endpoint that allows creation of [project API tokens](https://docs.getunleash.io/reference/api-tokens-and-client-keys#api-token-visibility) for the specified project.
 * @summary Create a project API token.
 */
export const createProjectApiToken = (
    projectId: string,
    createApiTokenSchema: BodyType<CreateApiTokenSchema>
) => {
    return fetcher<ApiTokenSchema>({
        url: `/api/admin/projects/${projectId}/api-tokens`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: createApiTokenSchema,
    });
};

/**
 * This operation deletes the API token specified in the request URL. If the token doesn't exist, returns an OK response (status code 200).
 * @summary Delete a project API token.
 */
export const deleteProjectApiToken = (projectId: string, token: string) => {
    return fetcher<void>({
        url: `/api/admin/projects/${projectId}/api-tokens/${token}`,
        method: 'delete',
    });
};
