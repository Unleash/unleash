/**
 * Generated by Orval
 * Do not edit manually.
 * See `gen:api` script in package.json
 */
import useSwr from 'swr';
import type { SWRConfiguration, Key } from 'swr';
import type {
    ServiceAccountsSchema,
    GetServiceAccounts401,
    GetServiceAccounts403,
    ServiceAccountSchema,
    CreateServiceAccountSchema,
    UpdateServiceAccountSchema,
    PatsSchema,
    GetServiceAccountTokens401,
    GetServiceAccountTokens403,
    GetServiceAccountTokens404,
    PatSchema,
} from '../models';
import { fetcher } from '../fetcher';
import type { ErrorType, BodyType } from '../fetcher';

/**
 * Returns the list of all service accounts.
 * @summary List service accounts.
 */
export const getServiceAccounts = () => {
    return fetcher<ServiceAccountsSchema>({
        url: `/api/admin/service-account`,
        method: 'get',
    });
};

export const getGetServiceAccountsKey = () =>
    [`/api/admin/service-account`] as const;

export type GetServiceAccountsQueryResult = NonNullable<
    Awaited<ReturnType<typeof getServiceAccounts>>
>;
export type GetServiceAccountsQueryError = ErrorType<
    GetServiceAccounts401 | GetServiceAccounts403
>;

/**
 * @summary List service accounts.
 */
export const useGetServiceAccounts = <
    TError = ErrorType<GetServiceAccounts401 | GetServiceAccounts403>
>(options?: {
    swr?: SWRConfiguration<
        Awaited<ReturnType<typeof getServiceAccounts>>,
        TError
    > & { swrKey?: Key; enabled?: boolean };
}) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetServiceAccountsKey() : null));
    const swrFn = () => getServiceAccounts();

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Creates a new service account.
 * @summary Create a service account.
 */
export const createServiceAccount = (
    createServiceAccountSchema: BodyType<CreateServiceAccountSchema>
) => {
    return fetcher<ServiceAccountSchema>({
        url: `/api/admin/service-account`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: createServiceAccountSchema,
    });
};

/**
 * Updates an existing service account identified by its id.
 * @summary Update a service account.
 */
export const updateServiceAccount = (
    id: string,
    updateServiceAccountSchema: BodyType<UpdateServiceAccountSchema>
) => {
    return fetcher<ServiceAccountSchema>({
        url: `/api/admin/service-account/${id}`,
        method: 'put',
        headers: { 'Content-Type': 'application/json' },
        data: updateServiceAccountSchema,
    });
};

/**
 * Deletes an existing service account identified by its id.
 * @summary Delete a service account.
 */
export const deleteServiceAccount = (id: string) => {
    return fetcher<void>({
        url: `/api/admin/service-account/${id}`,
        method: 'delete',
    });
};

/**
 * Returns the list of all tokens for a service account identified by the id.
 * @summary List all tokens for a service account.
 */
export const getServiceAccountTokens = (id: string) => {
    return fetcher<PatsSchema>({
        url: `/api/admin/service-account/${id}/token`,
        method: 'get',
    });
};

export const getGetServiceAccountTokensKey = (id: string) =>
    [`/api/admin/service-account/${id}/token`] as const;

export type GetServiceAccountTokensQueryResult = NonNullable<
    Awaited<ReturnType<typeof getServiceAccountTokens>>
>;
export type GetServiceAccountTokensQueryError = ErrorType<
    | GetServiceAccountTokens401
    | GetServiceAccountTokens403
    | GetServiceAccountTokens404
>;

/**
 * @summary List all tokens for a service account.
 */
export const useGetServiceAccountTokens = <
    TError = ErrorType<
        | GetServiceAccountTokens401
        | GetServiceAccountTokens403
        | GetServiceAccountTokens404
    >
>(
    id: string,
    options?: {
        swr?: SWRConfiguration<
            Awaited<ReturnType<typeof getServiceAccountTokens>>,
            TError
        > & { swrKey?: Key; enabled?: boolean };
    }
) => {
    const { swr: swrOptions } = options ?? {};

    const isEnabled = swrOptions?.enabled !== false && !!id;
    const swrKey =
        swrOptions?.swrKey ??
        (() => (isEnabled ? getGetServiceAccountTokensKey(id) : null));
    const swrFn = () => getServiceAccountTokens(id);

    const query = useSwr<Awaited<ReturnType<typeof swrFn>>, TError>(
        swrKey,
        swrFn,
        swrOptions
    );

    return {
        swrKey,
        ...query,
    };
};

/**
 * Creates a new token for the service account identified by the id.
 * @summary Create a token for a service account.
 */
export const createServiceAccountToken = (
    id: string,
    patSchema: BodyType<PatSchema>
) => {
    return fetcher<PatSchema>({
        url: `/api/admin/service-account/${id}/token`,
        method: 'post',
        headers: { 'Content-Type': 'application/json' },
        data: patSchema,
    });
};

/**
 * Deletes a token for the service account identified both by the service account's id and the token's id.
 * @summary Delete a token for a service account.
 */
export const deleteServiceAccountToken = (id: string, tokenId: string) => {
    return fetcher<void>({
        url: `/api/admin/service-account/${id}/token/${tokenId}`,
        method: 'delete',
    });
};
